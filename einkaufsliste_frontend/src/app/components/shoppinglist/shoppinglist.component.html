<div class="container">
    <div class="row">
        <div class="menuBar">
            <div class="col-2 menuBtn">
                <button pButton pRipple type="button" routerLink="/list-overview" style="color: white;" class="p-button-rounded p-button-secondary p-button-outlined"><i class="pi pi-angle-left" style="color:white"></i></button>
            </div>
            <div class="col-8 shoppinglistName">
                <h1>WG</h1>
            </div>
            <div class="col-2 menuBtn">
                <button pButton pRipple type="button" style="color: white;" class="p-button-rounded p-button-secondary p-button-outlined"><i class="pi pi-cog" style="color:white"></i></button>
            </div>
        </div>
        <div class="col-8">
            <button pButton pRipple type="button" label="Add Entry" icon="pi pi-plus" (click)="addEntry()" class="p-button-sm p-button-rounded  editBtn"></button>
        </div>
        <div class="editField col-4">
            <!-- <button pButton label="Edit" [ngClass]="{editBtn_on: edit_checked,editBtn_off: !edit_checked}" icon="pi pi-file-edit"(click)="changeEditBtn()" class="p-button-sm p-button-rounded"></button> -->
            <p-toggleButton onLabel="Edit" offLabel="Edit" onIcon="pi pi-check" offIcon="pi pi-times" [(ngModel)]="edit_checked"></p-toggleButton>
        </div>
        <div class="col-12 activeCard">
            <p-card header="Active">
                <div *ngFor="let entry of this.shoppinglistEntries" class="row">
                    <div *ngIf="entry.assignee && !entry.status" class="entry">
                        <div class="col-1 field-checkbox">
                            <p-checkbox [(ngModel)]="entry.status" [binary]="true" inputId="binary"></p-checkbox>
                        </div>
                        <div class="col">
                            <b>{{entry.name}}</b>
                        </div>
                        <div *ngIf="!edit_checked" class="col-4 assigneeField">
                            <p-avatar label="{{this.getFirstCharFromString(entry.assignee.username)}}" shape="circle" class="p-avatar p-component p-avatar-circle"
                            pTooltip="{{entry.assignee.username}}" tooltipPosition="top" tabindex="0" tooltipEvent="focus"></p-avatar>
                            <button pButton pRipple type="button" icon="pi pi-user-edit" (click)="showDialogForAssigneeModify()" style="height:40px;width: 40px;" class="p-button-rounded p-button-help assigneeAddBtn"></button> 
                        </div>     
                        <div *ngIf="edit_checked" class="col-4 assigneeField">
                            <button pButton pRipple type="button" icon="pi pi-minus" style="height:40px;width: 40px;" class="p-button-rounded p-button-danger assigneeAddBtn"></button> 
                        </div>
                    </div>
                    <div *ngIf="entry.assignee === null && !entry.status" class="entry">
                        <div class="col-1 field-checkbox">
                            <p-checkbox [(ngModel)]="entry.status" [binary]="true" inputId="binary"></p-checkbox>
                        </div>
                        <div class="col">
                            <b>{{entry.name}}</b>
                        </div>
                        <div *ngIf="!edit_checked" class="col-4 assigneeField">
                            <button pButton pRipple type="button" icon="pi pi-plus" (click)="showDialogForAssigneeModify()" style="height:40px;width: 40px;" class="p-button-rounded p-button-success assigneeAddBtn"></button> 
                        </div>  
                        <div *ngIf="edit_checked" class="col-4 assigneeField">
                            <button pButton pRipple type="button" icon="pi pi-minus" style="height:40px;width: 40px;" (click)="deleteEntry(entry.id)" class="p-button-rounded p-button-danger assigneeAddBtn"></button> 
                        </div>    
                    </div>      
                    <p-dialog header="Teilnehmerliste" [(visible)]="displayContribAtAssigneeModify" [modal]="true">
                        <p-listbox [options]="contributorlist" [(ngModel)]="selectedContributor" optionLabel="name"></p-listbox>
                        <div class="col-12 md:col-4 dialog-element">
                            <button pButton type="button" (click)="modifyEntry(entry)" label="Erstellen" icon="pi pi-check"></button>
                        </div>
                    </p-dialog>
                </div>
            </p-card>   
        </div>
        <div class="col-12 recentCard">
            <p-card header="Recent">
                <div *ngFor="let entry of this.shoppinglistEntries" class="row">
                    <div *ngIf="entry.assignee && entry.status" class="entry">
                        <div class="col-1 field-checkbox">
                            <p-checkbox [(ngModel)]="entry.status" [binary]="true" inputId="binary"></p-checkbox>
                        </div>
                        <div class="col">
                            <b>{{entry.name}}</b>
                        </div>
                        <div *ngIf="!edit_checked" class="col-4 assigneeField">
                            <p-avatar label="{{this.getFirstCharFromString(entry.assignee.username)}}" shape="circle" class="p-avatar p-component p-avatar-circle"
                            pTooltip="{{entry.assignee.username}}" tooltipPosition="top" tabindex="0" tooltipEvent="focus"></p-avatar>
                            <button pButton pRipple type="button" icon="pi pi-user-edit" (click)="showDialogForAssigneeModify()" style="height:40px;width: 40px;" class="p-button-rounded p-button-help assigneeAddBtn"></button> 
                        </div>     
                        <div *ngIf="edit_checked" class="col-4 assigneeField">
                            <button pButton pRipple type="button" icon="pi pi-minus" style="height:40px;width: 40px;" class="p-button-rounded p-button-danger assigneeAddBtn"></button> 
                        </div>   
                    </div>
                    <div *ngIf="entry.assignee === null && entry.status" class="entry">
                        <div class="col-1 field-checkbox">
                            <p-checkbox [(ngModel)]="entry.status" [binary]="true" inputId="binary"></p-checkbox>
                        </div>
                        <div class="col">
                            <b>{{entry.name}}</b>
                        </div>
                        <div *ngIf="!edit_checked" class="col-4 assigneeField">
                            <button pButton pRipple type="button" icon="pi pi-plus" (click)="showDialogForAssigneeModify()" style="height:40px;width: 40px;" class="p-button-rounded p-button-success assigneeAddBtn"></button> 
                        </div>  
                        <div *ngIf="edit_checked" class="col-4 assigneeField">
                            <button pButton pRipple type="button" icon="pi pi-minus" style="height:40px;width: 40px;" (click)="deleteEntry(entry.id)" class="p-button-rounded p-button-danger assigneeAddBtn"></button> 
                        </div>       
                    </div>
                    <p-dialog header="Teilnehmerliste" [(visible)]="displayContribAtAssigneeModify" [modal]="true">
                        <p-listbox [options]="contributorlist" [(ngModel)]="selectedContributor" optionLabel="username"></p-listbox>
                        <div class="col-12 md:col-4 dialog-element">
                            <button pButton type="button" (click)="modifyEntry(entry)" label="Assign" icon="pi pi-user-edit"></button>
                        </div>
                    </p-dialog>
                </div>   
            </p-card>   
        </div>
    </div>
</div>
